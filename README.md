# java-lotto-precourse

# 요구사항 명세서

## 기능 요구사항
간단한 로또 발매기를 구현한다.  
각 기능을 구현할 때 branch를 나눠 작업하여 기능 단위 커밋을 만족시킨다.  
각 기능에 대한 번호를 붙여 기능을 구현하도록 노력한다.

### 1. 로또 구입가 입력 기능
- **로또 1장 가격**: 1,000원
- **구입 금액**: 입력된 구입 금액에 따라 로또 발행
  - 입력 시 1,000원 단위로 입력받음

### 2. 로또 발행 출력 기능
- **로또 번호 범위**: 1 ~ 45
- **로또 발행**: 1개의 로또 발행 시 중복되지 않는 6개 숫자 추출
  - 로또 번호는 오름차순으로 출력

### 3. 당첨 번호, 보너스 번호 입력 기능
- **당첨 번호**: 중복되지 않는 6개 번호 + 보너스 번호 1개 추출

### 4. 당첨 통계 출력 기능
- **당첨 내역**: 출력
- **당첨 기준 및 금액**
  - **1등**: 6개 번호 일치 / 2,000,000,000원
  - **2등**: 5개 번호 + 보너스 번호 일치 / 30,000,000원
  - **3등**: 5개 번호 일치 / 1,500,000원
  - **4등**: 4개 번호 일치 / 50,000원
  - **5등**: 3개 번호 일치 / 5,000원
- **수익률**: 계산 및 출력 (소수점 둘째 자리에서 반올림)

### 예외 처리
- **잘못된 값 입력 시**: `[ERROR]`로 시작하는 에러 메시지 출력
- **명확한 예외 유형 처리**: 예를 들어, `IllegalArgumentException`, `IllegalStateException`
- **예외처리 항목**
  - 로또 번호의 범위가 1 ~ 45의 범위를 넘어서는 경우
  - 로또 구입 금액이 1,000으로 나누어 떨어지지 않는 경우
  - 유효한 숫자를 입력하지 않았을 경우(실수 또는 문자)

### 실행 결과 예시
```
구입금액을 입력해 주세요.
8000

8개를 구매했습니다.
[8, 21, 23, 41, 42, 43]
[3, 5, 11, 16, 32, 38]
[7, 11, 16, 35, 36, 44]
[1, 8, 11, 31, 41, 42]
[13, 14, 16, 38, 42, 45]
[7, 11, 30, 40, 42, 43]
[2, 13, 22, 32, 38, 45]
[1, 3, 5, 14, 22, 45]

당첨 번호를 입력해 주세요.
1,2,3,4,5,6

보너스 번호를 입력해 주세요.
7

당첨 통계
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
총 수익률은 62.5%입니다.
```

---

# 로또 프로젝트 스프린트 계획
각 스프린트는 LT-X (X는 스프린트 번호) 브랜치에서 작업하고  
작업이 완료되면 `maro5397` 브랜치로 병합하여 기능 단위 커밋을 수행한다.

## Sprint 1: 로또 기본 기능 구현
**목표:** 로또 티켓을 생성하고, 발행할 티켓 수를 계산할 수 있는 기본 기능 구현.

- **Story 1.1:** 로또 번호 생성 기능
    - **요구사항:** 로또 티켓 한 장의 번호를 생성할 수 있다.
    - **작업 항목:**
        - [x] `Lotto` 클래스 구현 (1~45 범위의 6개 숫자 유효성 검사).
        - [x] `LottoMachine`에서 랜덤 번호로 여러 `Lotto` 생성 후 `LottoTickets`라는 객체 생성.

- **Story 1.2:** 구매 금액에 따른 티켓 수 계산 기능
    - **요구사항:** 로또 구입 금액을 입력받아 발행할 수 있는 티켓 수를 계산한다.
    - **작업 항목:**
        - [x] `LottoMachine` 클래스에서 `calculateTicketCount()` 메서드를 통해 티켓 수 계산.
        - [x] 금액이 1,000원 단위로 나누어떨어지지 않으면 `IllegalArgumentException` 발생.

---

## Sprint 2: 당첨 번호 및 보너스 번호 설정
**목표:** 당첨 번호와 보너스 번호를 입력받아 저장할 수 있도록 구현.

- **Story 2.1:** 당첨 번호 및 보너스 번호 입력 기능
    - **요구사항:** 당첨 번호 6개와 보너스 번호 1개를 입력받고 유효성을 검증한다.
    - **작업 항목:**
        - [x] `WinningNumbers` 클래스 구현.
        - [x] 당첨 번호와 보너스 번호의 범위(1~45) 및 중복 검증.
        - [x] 보너스 번호와 당첨 번호가 중복되지 않도록 예외 처리.

- **Story 2.2:** 로또 당첨 순위 판별 기능
    - **요구사항:** 사용자의 티켓을 기준으로 당첨 번호와 일치하는 개수를 통해 당첨 순위를 판별한다.
    - **작업 항목:**
        - [x] `LottoRank` Enum을 이용해 당첨 순위 정의.
        - [x] `WinningNumbers` 클래스에 `determineRank()` 메서드를 구현하여 순위 판별.

---

## Sprint 3: 당첨 결과 및 수익률 계산
**목표:** 구매한 로또와 당첨 번호를 비교해 당첨 결과 및 수익률을 계산하는 기능을 구현.

- **Story 3.1:** 당첨 결과 통계 기능
    - **요구사항:** 사용자가 구매한 티켓과 당첨 번호를 비교하여 당첨 횟수를 통계에 기록한다.
    - **작업 항목:**
        - [x] `LottoStatistics` 클래스에 당첨 결과를 기록하는 메서드 구현.
        - [x] `LottoRank`에 따른 당첨 횟수 집계.

- **Story 3.2:** 수익률 계산 기능
    - **요구사항:** 총 투자 금액과 당첨 금액을 기반으로 수익률을 계산한다.
    - **작업 항목:**
        - [x] `LottoStatistics`에 수익률 계산 메서드 구현.
        - [x] 소수점 둘째 자리까지 반올림 처리.

---

## Sprint 4: 예외 처리 및 입력/출력 구현
**목표:** 사용자의 잘못된 입력에 대해 예외를 처리하고 결과를 출력할 수 있도록 인터페이스를 구현.

- **Story 4.1:** 사용자 입력 검증 및 예외 처리
    - **요구사항:** 사용자 입력이 요구사항에 맞지 않을 경우 예외 메시지를 출력한다.
    - **작업 항목:**
        - [x] 모든 입력값에 대한 유효성 검증 및 `IllegalArgumentException` 사용.
        - [x] 예외 발생 시 `[ERROR]`로 시작하는 메시지를 출력하고 해당 입력을 다시 받도록 처리.

- **Story 4.2:** 발행된 로또 번호 출력
    - **요구사항:** 발행된 로또 티켓의 번호를 오름차순으로 정렬하여 출력한다.
    - **작업 항목:**
        - [x] `Lotto` 객체에서 번호 정렬 메서드 구현.
        - [x] 발행된 모든 티켓 번호를 형식에 맞춰 출력.

- **Story 4.3:** 당첨 결과 및 수익률 출력
    - **요구사항:** 당첨 통계와 수익률을 형식에 맞춰 출력한다.
    - **작업 항목:**
        - [x] 각 당첨 등수별로 당첨 횟수와 금액을 출력.
        - [x] 수익률 계산 결과를 형식에 맞춰 출력.

---

## Sprint 5: 테스트 및 리팩토링
**목표:** 테스트를 통해 모든 기능이 요구사항에 맞게 동작하는지 확인하고, 코드 개선이 필요한 부분을 리팩토링한다.

- **Story 5.1:** 테스트 작성
    - **요구사항:** 구매, 당첨 번호 설정, 결과 출력 등의 전체 흐름을 테스트한다.
    - **작업 항목:**
        - [x] 각 클래스에 대한 유닛 테스트를 작성하고, 테스트를 통해 전체 흐름 검증.

- **Story 5.2:** 리팩토링 및 최적화
    - **요구사항:** 코드의 중복 제거 및 불필요한 코드 최적화.
    - **작업 항목:**
        - [x] 각 클래스와 메서드의 구조 검토.
        - [x] 성능 최적화 및 코드 가독성 개선.
        - [ ] 우테코 개발 요구 사항 검토