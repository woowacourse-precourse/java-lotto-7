# java-lotto-precourse

# 📖 기능 명세서

# 🥇 **3주차 미션 목표**
1. **의도가 드러나는 네이밍**
    - 변수, 메서드, 클래스의 이름은 축약 없이 역할이 명확히 드러나도록 작성한다.
2. **하나의 기능만을 담당하는 코드 작성**
    - 각 메서드가 **단일 책임**을 갖도록 설계한다.

## 📌 **구현할 기능 목록**

### **1. 구입 금액 입력 및 검증**

#### **1-1. 구입 금액 입력 안내 메시지 출력 기능**
- [x] **"구입금액을 입력해 주세요."** 메시지를 출력한다.

#### **1-2. 구입 금액 입력 기능**
- [x] 사용자가 구입 금액을 입력한다.

#### **1-3. 구입 금액 검증 기능**
- [x] 입력된 금액이 **정수**인지 확인한다.
    - [x] 정수가 아닌 값이 입력되면 `IllegalArgumentException`을 발생시킨다.
    - [x] 예외 메시지: `[ERROR] 구입 금액은 숫자여야 합니다.`
- [x] 입력된 금액이 **1000원 이하**인 경우 `IllegalArgumentException`를 발생시킨다.
    - [x] 예외 메시지: `[ERROR] 구입 금액은 1000원 이상이어야 합니다.`
- [x] 입력된 금액이 **1,000원 단위**인지 확인한다.
    - [x] 1,000원 단위가 아니면 `IllegalArgumentException`을 발생시킨다.
    - [x] 예외 메시지: `[ERROR] 구입 금액은 1,000원 단위로 입력해야 합니다.`

---

### **2. 로또 발행 및 출력**

#### **2-1. 로또 장수 계산 기능**
- [x] **유효한 금액**을 입력받아 발행할 로또 장수를 계산한다.
    - 예: 8,000원 → 8장 발행.

#### **2-2. 로또 발행 기능**
- [x] `Randoms.pickUniqueNumbersInRange(1, 45, 6)`을 사용해 로또 번호를 생성한다.
    - [x] 생성된 번호를 **오름차순으로 정렬**한다.
    - [x] 발행한 번호 중 중복된 조합이 없는지 확인한다.
    - [x] 중복된 조합이 있을 경우 다시 번호를 생성한다.

#### **2-3. 로또 발행 결과 출력 기능**
- [x] **"{N}개를 구매했습니다."** 메시지를 출력한다.
    - 예: **"8개를 구매했습니다."**
- [x] 각 로또 번호를 한 줄씩 출력한다.
    - 예:
      ```
      [8, 21, 23, 41, 42, 43]
      [3, 5, 11, 16, 32, 38]
      ```

---

### **3. 당첨 번호 입력 및 검증**

#### **3-1. 당첨 번호 입력 안내 메시지 출력 기능**
- [x] **"당첨 번호를 입력해 주세요."** 메시지를 출력한다.

#### **3-2. 당첨 번호 입력 기능**
- [x] 사용자가 쉼표(,)로 구분된 **6개의 번호**를 입력한다.

#### **3-3. 당첨 번호 검증 기능**
- [x] **입력된 번호의 개수**가 정확히 6개인지 확인한다.
    - [x] 부족하거나 초과할 경우 `IllegalArgumentException` 발생.
    - [x] 예외 메시지: `[ERROR] 당첨 번호는 6개여야 합니다.`
- [x] **각 번호가 1~45 범위**에 있는지 확인한다.
    - [x] 범위를 벗어난 경우 `IllegalArgumentException` 발생.
    - [x] 예외 메시지: `[ERROR] 당첨 번호는 1부터 45 사이의 숫자여야 합니다.`
- [x] **숫자가 아닌 문자**가 포함된 경우 `IllegalArgumentException` 발생.
    - [x] 예외 메시지: `[ERROR] 당첨 번호는 숫자여야 합니다.`
- [x] **중복된 번호가 없는지** 확인한다.
    - [x] 중복된 번호가 있을 경우 `IllegalArgumentException` 발생.
    - [x] 예외 메시지: `[ERROR] 중복된 당첨 번호가 있습니다.`

---

### **4. 보너스 번호 입력 및 검증**

#### **4-1. 보너스 번호 입력 안내 메시지 출력 기능**
- [x] **"보너스 번호를 입력해 주세요."** 메시지를 출력한다.

#### **4-2. 보너스 번호 입력 기능**
- [x] 사용자가 **보너스 번호**를 입력한다.

#### **4-3. 보너스 번호 검증 기능**
- [x] 보너스 번호가 **1~45 범위**에 있는지 확인한다.
    - [x] 범위를 벗어난 경우 `IllegalArgumentException` 발생.
    - [x] 예외 메시지: `[ERROR] 보너스 번호는 1부터 45 사이의 숫자여야 합니다.`
- [x] 보너스 번호가 **당첨 번호와 중복되지 않는지** 확인한다.
    - [x] 중복된 경우 `IllegalArgumentException` 발생.
    - [x] 예외 메시지: `[ERROR] 보너스 번호는 당첨 번호와 중복될 수 없습니다.`

---

### **5. 로또 번호와 당첨 번호 비교 및 등수 판정**

#### **5-1. 로또 번호와 당첨 번호 비교 기능**
- [x] **구매한 모든 로또**와 당첨 번호를 비교한다.
- [x] **일치하는 번호의 개수**를 계산한다.

#### **5-2. 2등 판정 기능**
- [x] **5개 번호가 일치**하고 **보너스 번호가 포함**된 경우 **2등**으로 처리한다.

#### **5-3. 등수 판정 기능**
- [x] 번호 일치 개수에 따라 **1등부터 5등까지** 등수를 판정한다.

---

### **6. 당첨 통계 및 수익률 계산**

#### **6-1. 당첨 통계 출력 시작 안내 메시지 출력 기능**
- [x] **"당첨 통계"** 메시지와 구분선(`---`)을 출력한다.

#### **6-2. 등수별 당첨 결과 출력 기능**
- [x] 각 등수의 **당첨 횟수와 상금**을 출력한다.
    - 예:
      ```
      3개 일치 (5,000원) - 1개
      4개 일치 (50,000원) - 0개
      5개 일치 (1,500,000원) - 0개
      5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
      6개 일치 (2,000,000,000원) - 0개
      ```

#### **6-3. 총 수익 계산 기능**
- [x] 각 등수별 **(당첨 횟수 × 상금)** 으로 총 수익을 계산한다.

#### **6-4. 수익률 계산 및 출력 기능**
- [x] **수익률**을 `(총 수익 / 총 구입 금액) × 100`으로 계산한다.
- [x] **소수점 둘째 자리에서 반올림**하여 출력한다.
    - 예: **"총 수익률은 62.5%입니다."**

---

### **7. 예외 처리 및 재입력 기능**

#### **7-1. 예외 발생 시 에러 메시지 출력 기능**
- [x] 잘못된 입력이 발생하면 `[ERROR]`로 시작하는 에러 메시지를 출력한다.

#### **7-2. 재입력 기능**
- [x] 에러 발생 시 해당 입력을 **다시 요청**한다.


---

# 📖 **기능별 테스트 코드 명세**

## **1. 구입 금액 입력 및 출력 기능**

---

### **1-1. 구입 금액 입력 안내 메시지 출력 기능**

#### **테스트 항목:**
1. **안내 메시지 출력 테스트**
    - **목표**: 올바른 안내 메시지가 출력되는지 확인한다.
    - **테스트 내용**:
        - 출력 메시지: `"구입금액을 입력해 주세요."`

---

### **1-2. 구입 금액 입력 기능**

#### **Happy Case**
1. **정상적인 금액 입력 테스트**
    - **입력**: `"8000"`
    - **기대 결과**: 정상 입력으로 통과.

2. **`int` 최대 범위 금액 입력 테스트**
    - **입력**: `"2147483647"` (int의 최대값)
    - **기대 결과**: 정상 입력으로 통과.

3. **`long` 최대 범위 금액 입력 테스트**
    - **입력**: `"9223372036854775807"` (long의 최대값)
    - **기대 결과**: 정상 입력으로 통과.

#### **Bad Case**

1. **1000원 이하 금액 입력 테스트**
    - **입력**: `"500"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 구입 금액은 1000원 이상이어야 합니다.`

2. **1,000원 단위로 나누어 떨어지지 않는 금액 입력 테스트**
    - **입력**: `"1300"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 구입 금액은 1,000원 단위로 입력해야 합니다.`

3. **정수가 아닌 문자 입력 테스트**
    - **입력**: `"8천원"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 구입 금액은 숫자여야 합니다.`

4. **음수 입력 테스트**
    - **입력**: `"-1000"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 구입 금액은 1000원 이상이어야 합니다.`

---

## **2. 로또 발행 및 출력 기능**

---

### **2-1. 로또 장수 계산 기능**

#### **Happy Case**
1. **유효한 구입 금액으로 로또 장수 계산 테스트**
    - **입력**: `"8000"`
    - **기대 결과**:
        - 로또 8장이 발행되어야 한다.
        - 발행 장수: **8**

---

### **2-2. 로또 발행 기능**

#### **Happy Case**
1. **유효한 구입 금액으로 로또 번호 발행 테스트**
    - **기능 설명**: 로또 번호를 발행할 때, 중복 없는 번호가 1~45 사이에서 6개 추출되어야 한다.
    - **테스트 방법**:
        1. `Randoms.pickUniqueNumbersInRange(1, 45, 6)`을 호출.
        2. 반환된 번호 리스트의 크기가 6인지 확인.
        3. 모든 번호가 1~45 사이에 있는지 검증.
    - **기대 결과**:
        - 번호 6개가 중복 없이 발행됨.
        - 모든 번호는 1~45 범위 내에 존재.


#### **Bad Case: 중복 번호 재계산 테스트**
1. **중복 번호가 생성될 때 재발행되는지 테스트**
    - **기능 설명**: 로또 발행 중 같은 번호 조합이 중복되면, 새로운 조합이 다시 생성되어야 한다.
    - **테스트 방법**:
        1. 내부 로직에서 일부러 중복된 조합을 반환하도록 시뮬레이션.
        2. 중복이 감지되면 다시 로또 번호를 생성.
        3. 최종 발행된 로또 번호들이 모두 고유한지 검증.
    - **기대 결과**:
        - 중복 번호 조합은 자동으로 제거되고 새로운 조합이 발행됨.

---

### **2-3. 로또 발행 결과 출력 기능**

#### **Happy Case**
1. **로또 번호가 제대로 출력되는지 테스트**
    - **기능 설명**: 로또 번호가 오름차순으로 정렬된 상태로 올바르게 출력되는지 확인한다.
    - **테스트 방법**:
        1. 8개의 로또 번호 리스트를 준비.
        2. 각 번호 리스트가 오름차순으로 정렬되어 출력되는지 확인.
    - **기대 결과**:
        - 예시 출력:
          ```
          [3, 5, 11, 16, 32, 38]
          [8, 21, 23, 41, 42, 43]
          ```
        - 모든 번호가 오름차순으로 정렬된 상태로 출력됨.

---

## **3. 당첨 번호 입력 및 검증 기능**

---

### **3-1. 당첨 번호 입력 안내 메시지 출력 기능**

#### **Happy Case**
1. **안내 메시지 출력 테스트**
    - **목표**: "당첨 번호를 입력해 주세요." 메시지가 정상적으로 출력되는지 확인한다.
    - **테스트 내용**:
        - 출력 메시지: `"당첨 번호를 입력해 주세요."`

---

### **3-2. 당첨 번호 입력 및 검증 기능**

#### **Happy Case**

1. **정상적인 당첨 번호 입력 및 검증 테스트**
    - **입력**: `"1,2,3,4,5,6"`
    - **기대 결과**:
        - 입력된 번호들이 정상 처리되고 리스트에 저장된다.
        - 저장된 리스트: `[1, 2, 3, 4, 5, 6]`

2. **범위 내의 유효한 번호 입력 테스트**
    - **입력**: `"7,14,22,33,39,45"`
    - **기대 결과**:
        - 입력된 모든 번호가 1~45 범위 내에 있으며, 검증을 통과한다.

#### **Bad Case**

1. **입력값이 비어있는 경우**
    - **입력**: `""`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 당첨 번호는 6개여야 합니다.`

2. **6개 미만의 번호 입력**
    - **입력**: `"1,2,3"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 당첨 번호는 6개여야 합니다.`

3. **6개 초과의 번호 입력**
    - **입력**: `"1,2,3,4,5,6,7"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 당첨 번호는 6개여야 합니다.`

4. **범위를 벗어난 번호 입력**
    - **입력**: `"0,46,5,10,15,20"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 당첨 번호는 1부터 45 사이의 숫자여야 합니다.`

5. **중복된 번호 입력**
    - **입력**: `"1,1,2,3,4,5"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 중복된 당첨 번호가 있습니다.`

6. **숫자가 아닌 문자 포함**
    - **입력**: `"a,2,3,b,4,5"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 당첨 번호는 숫자여야 합니다.`

7. **공백 포함된 입력**
    - **입력**: `"1, 2, 3 ,4 , 5 ,6"`
    - **기대 결과**:
        - 공백을 제거한 후 정상 처리됨: `[1, 2, 3, 4, 5, 6]`

8. **숫자가 아닌 특수문자 포함**
    - **입력**: `"1,2,3,4,@,6"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 당첨 번호는 숫자여야 합니다.`

---

## **4. 보너스 번호 입력 및 검증 기능**

---

### **4-1. 보너스 번호 입력 안내 메시지 출력 기능**

#### **Happy Case**
1. **안내 메시지 출력 테스트**
    - **목표**: `"보너스 번호를 입력해 주세요."` 메시지가 정상적으로 출력되는지 확인한다.
    - **테스트 내용**:
        - 출력 메시지: `"보너스 번호를 입력해 주세요."`

---

### **4-2. 보너스 번호 입력 및 검증 기능**

#### **Happy Case**

1. **정상적인 보너스 번호 입력 및 검증 테스트**
    - **입력**: `"7"`
    - **기대 결과**:
        - 입력된 보너스 번호가 정상 처리됨: `7`

2. **범위 내의 유효한 보너스 번호 입력 테스트**
    - **입력**: `"45"`
    - **기대 결과**:
        - 입력된 보너스 번호가 1~45 범위 내에서 정상 처리됨.

#### **Bad Case**

1. **입력값이 비어있는 경우**
    - **입력**: `""`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 보너스 번호를 입력해야 합니다.`

2. **범위를 벗어난 보너스 번호 입력**
    - **입력**: `"46"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 보너스 번호는 1부터 45 사이의 숫자여야 합니다.`

3. **숫자가 아닌 문자 포함**
    - **입력**: `"a"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 보너스 번호는 숫자여야 합니다.`

4. **숫자가 아닌 특수문자 포함**
    - **입력**: `"@"`
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 보너스 번호는 숫자여야 합니다.`

5. **공백 포함된 입력**
    - **입력**: `" 7 "`
    - **기대 결과**:
        - 공백을 제거한 후 정상 처리됨: `7`

6. **당첨 번호와 중복된 보너스 번호 입력**
    - **입력**: `"3"` (당첨 번호에 이미 포함된 경우)
    - **기대 결과**:
        - 예외 메시지: `[ERROR] 보너스 번호는 당첨 번호와 중복될 수 없습니다.`

---

### **5-1. 로또 번호와 당첨 번호 비교 및 등수 판정 기능**

---

#### **Happy Case**

1. **3개 번호 일치 - 5등 판정 테스트**
    - **입력**:
        - 로또 번호: `[1, 2, 3, 10, 20, 30]`
        - 당첨 번호: `[1, 2, 3, 4, 5, 6]`
    - **기대 결과**:
        - **3개 일치** → **5등**

2. **4개 번호 일치 - 4등 판정 테스트**
    - **입력**:
        - 로또 번호: `[1, 2, 3, 4, 10, 20]`
        - 당첨 번호: `[1, 2, 3, 4, 5, 6]`
    - **기대 결과**:
        - **4개 일치** → **4등**

3. **5개 번호 일치 - 3등 판정 테스트**
    - **입력**:
        - 로또 번호: `[1, 2, 3, 4, 5, 10]`
        - 당첨 번호: `[1, 2, 3, 4, 5, 6]`
    - **기대 결과**:
        - **5개 일치** → **3등**

4. **5개 번호 일치 + 보너스 번호 일치 - 2등 판정 테스트**
    - **입력**:
        - 로또 번호: `[1, 2, 3, 4, 5, 7]`
        - 당첨 번호: `[1, 2, 3, 4, 5, 6]`
        - 보너스 번호: `7`
    - **기대 결과**:
        - **5개 번호 일치 + 보너스 번호 일치** → **2등**

5. **6개 번호 일치 - 1등 판정 테스트**
    - **입력**:
        - 로또 번호: `[1, 2, 3, 4, 5, 6]`
        - 당첨 번호: `[1, 2, 3, 4, 5, 6]`
    - **기대 결과**:
        - **6개 일치** → **1등**

---

## **6. 당첨 통계 및 수익률 계산**

---

### **6-1. 당첨 통계 출력 테스트**

#### **Happy Case**

1. **당첨 결과가 있을 때 통계 출력 테스트**
    - **입력**:
        - 3개 번호 일치: 1회
        - 4개 번호 일치: 0회
        - 5개 번호 일치: 0회
        - 5개 번호 + 보너스 번호 일치: 0회
        - 6개 번호 일치: 0회
    - **기대 결과**:
      ```
      당첨 통계
      ---
      3개 일치 (5,000원) - 1개
      4개 일치 (50,000원) - 0개
      5개 일치 (1,500,000원) - 0개
      5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
      6개 일치 (2,000,000,000원) - 0개
      ```

---

### **6-2. 총 수익률 계산 테스트**

#### **Happy Case**

1. **수익률 62.5% 계산 테스트**
    - **입력**:
        - 총 당첨 금액: 5,000원
        - 구입 금액: 8,000원
    - **기대 결과**:
        - 수익률 계산: `(5,000 / 8,000) × 100 = 62.5%`
        - 출력 결과: `"총 수익률은 62.5%입니다."`

2. **수익률 0% 계산 테스트**
    - **입력**:
        - 총 당첨 금액: 0원
        - 구입 금액: 10,000원
    - **기대 결과**:
        - 수익률 계산: `(0 / 10,000) × 100 = 0.0%`
        - 출력 결과: `"총 수익률은 0.0%입니다."`

3. **수익률 100% 계산 테스트**
    - **입력**:
        - 총 당첨 금액: 10,000원
        - 구입 금액: 10,000원
    - **기대 결과**:
        - 수익률 계산: `(10,000 / 10,000) × 100 = 100.0%`
        - 출력 결과: `"총 수익률은 100.0%입니다."`

---
