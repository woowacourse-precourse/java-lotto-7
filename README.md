# 로또💸

## 프로젝트 설명

간단한 로또 발매기 프로젝트이다. 

프로젝트 입출력 흐름은 다음과 같다.

1. **구입 금액 입력**: 로또 구입 금액을 입력 받는다. 금액은 1,000원 단위로 입력한다.
2. **로또 발행 및 번호 출력**: 입력된 금액에 따른 로또 수량과 번호를 출력한다.
3. **당첨 번호 입력**: 쉼표(,)로 구분된 당첨 번호를 입력 받는다.
4. **보너스 번호 입력**: 보너스 번호를 입력 받는다.
5. **당첨 내역 출력**: 당첨 결과를 출력한다.

### 당첨 기준 및 상금

- 1등: 6개 번호 일치 / 2,000,000,000원
- 2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원
- 3등: 5개 번호 일치 / 1,500,000원
- 4등: 4개 번호 일치 / 50,000원
- 5등: 3개 번호 일치 / 5,000원

## 실행 결과 예시

```prolog
구입금액을 입력해 주세요.
8000

8개를 구매했습니다.
[8, 21, 23, 41, 42, 43]
[3, 5, 11, 16, 32, 38]
[7, 11, 16, 35, 36, 44]
[1, 8, 11, 31, 41, 42]
[13, 14, 16, 38, 42, 45]
[7, 11, 30, 40, 42, 43]
[2, 13, 22, 32, 38, 45]
[1, 3, 5, 14, 22, 45]

당첨 번호를 입력해 주세요.
1,2,3,4,5,6

보너스 번호를 입력해 주세요.
7

당첨 통계
---
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
총 수익률은 62.5%입니다.

```

## 프로젝트 구조

```agda
├───main
│   └───java
│       └───lotto
│           │   Application.java
│           │
│           ├───controller
│           │       LottoController.java
│           │
│           ├───exception
│           │       ExceptionMessage.java
│           │
│           ├───model
│           │       Lotto.java
│           │
│           ├───service
│           │       LottoService.java
│           │
│           ├───validator
│           │       InputValidator.java
│           │
│           └───view
│                   InputView.java
│                   OutputView.java
│                   Prompt.java
│
└───test
    └───java
        └───lotto
            │   ApplicationTest.java
            │   LottoTest.java
            │
            ├───service
            │       LottoServiceTest.java
            │
            └───validator
                    InputValidatorTest.java
```

## 클래스 설명

- **Application**: 프로젝트의 메인 클래스이다.
- **LottoController**: 애플리케이션의 주요 흐름을 제어한다.
- **ExceptionMessage**: 에러 메시지를 관리한다.
- **Lotto**: 로또 번호를 모델링하는 클래스이다.
- **LottoService**: 비즈니스 로직을 처리한다.
- **InputValidator**: 입력값을 검증한다.
- **InputView**: 입력을 담당하는 클래스이다.
- **OutputView**: 출력을 담당하는 클래스이다.
- **Prompt**: 프롬프트 메시지를 관리한다.

## 플로우 설명

### 1. 구매금액 입력 및 처리

1. **프롬프트 출력**: `LottoController`에서 **구매 금액 입력** 프롬프트를 `OutputView`로 출력
2. **입력 받기**: `LottoController`가 `InputView`를 호출하여 금액을 입력 받음
3. **입력 값 검증 및 재입력**: `InputValidator`로 구매 금액을 검증하고, 예외 발생 시 에러 메시지 출력 후 재입력 받기
4. **로또 객체 생성 및 반환**: 올바른 금액 입력 시 `LottoService`를 호출하여 로또 번호를 생성하고 `Lotto` 객체 목록 반환
5. **로또 번호 출력**: `LottoController`에서 생성된 로또 번호를 `OutputView`를 통해 출력

### 2. 당첨 번호 입력 및 처리

1. **프롬프트 출력**: `LottoController`에서 **당첨 번호 입력** 프롬프트를 `OutputView`로 출력
2. **입력 받기**: `InputView`를 호출하여 당첨 번호 입력 받기
3. **당첨 번호 검증 및 재입력**: `InputValidator`로 당첨 번호를 검증하고, 예외 발생 시 에러 메시지 출력 후 재입력 받기

### 3. 보너스 번호 입력 및 처리

1. **프롬프트 출력**: `LottoController`에서 **보너스 번호 입력** 프롬프트를 `OutputView`로 출력
2. **입력 받기**: `InputView`를 호출하여 보너스 번호 입력 받기
3. **보너스 번호 검증 및 재입력**: `InputValidator`를 통해 당첨 번호와의 중복 여부를 포함한 보너스 번호 유효성 검증, 예외 발생 시 에러 메시지 출력 후 재입력

### 4. 당첨 결과 및 수익률 계산

1. **당첨 결과 계산**: `LottoController`가 `LottoService`에 당첨 번호, 보너스 번호, 로또 리스트를 전달하여 당첨 결과 계산
2. **수익률 계산 요청**: `LottoController`에서 당첨 결과와 구입 금액을 기반으로 `LottoService`에 수익률 계산 요청
3. **최종 결과 출력**: 계산된 당첨 결과와 수익률을 `OutputView`로 전달하여 최종 결과 출력

## 구현할 기능 목록

- **입력**
    - 로또 구입 금액
    - 당첨 번호 6개 입력
    - 보너스 번호 입력
- **출력**
    - 입력 받기 위한 프롬포트 출력
    - 발행한 로또 수량 및 번호 출력 (오름차순)
    - 당첨 내역 및 수익률 출력
    - 예외 상황 시 에러 문구 출력 ("[ERROR]"로 시작해야 함)
- **로또 기능**
    - **구입한 로또 객체 생성**
        - 구입 금액에 따른 로또 개수 판별
        - 각 로또마다 1부터 45 사이의 숫자 중 중복되지 않는 6개의 랜덤 숫자를 생성하여 로또 객체 생성
    - **당첨 판별**
        - 일치 개수 및 보너스 일치 여부 확인
        - 일치하는 숫자 개수 별 카운트 업데이트
    - **수익률 계산**
        - 총 상금 계산 → 수익률 계산
- **예외 처리 (IllegalArgumentException)**

    - **구입 금액 입력받는 상황**
        - 10만원 초과해서 구입할 경우 (로또 구입 금액 10만원 제한)
        - 아무것도 입력하지 않았을 경우
        - 1000 단위가 아닐 경우
        - 양의 정수가 입력되지 않은 경우

    - **당첨 번호 입력받는 상황**
        - 아무것도 입력하지 않았을 경우
        - 1-45 사이의 숫자가 아닐 경우
        - 6개의 숫자가 주어지지 않았을 경우
        - 양의 정수가 입력되지 않은 경우
        - 중복되는 숫자가 있을 경우

    - **보너스 번호 입력받는 상황**
        - 1-45 사이의 숫자가 아닐 경우
        - 양의 정수가 입력되지 않은 경우
        - 아무 것도 입력되지 않은 경우
        - 당첨 번호에 이미 존재하는 숫자일 경우

## 개발 방식

- **TDD(테스트 주도 개발) 방식**을 사용하여 기능을 구현합니다. 기본적으로 다음의 세 단계로 진행합니다.
    1. **테스트 코드 작성**: 구현하고자 하는 기능에 대한 테스트 코드를 작성합니다. 이 단계에서 테스트는 실패하게 됩니다.
    2. **기능 구현**: 작성한 테스트를 통과할 수 있도록 최소한의 기능을 구현합니다.
    3. **리팩토링**: 구현한 코드를 정리하고 최적화합니다.
- 테스트 코드가 명확할 경우, 3단계로 나누지 않고 2단계로 진행하겠습니다.
- 입출력 기능은 요구사항에 따라 테스트를 따로 작성하지 않겠습니다.
